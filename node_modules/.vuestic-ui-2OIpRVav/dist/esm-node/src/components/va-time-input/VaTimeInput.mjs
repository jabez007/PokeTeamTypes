var e=Object.defineProperty,o=Object.defineProperties,r=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,__defNormalProp=(o,r,a)=>r in o?e(o,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[r]=a,__spreadValues=(e,o)=>{for(var r in o||(o={}))t.call(o,r)&&__defNormalProp(e,r,o[r]);if(a)for(var r of a(o))n.call(o,r)&&__defNormalProp(e,r,o[r]);return e},__spreadProps=(e,a)=>o(e,r(a));import{defineComponent as l,shallowRef as s,computed as p,nextTick as d,resolveComponent as u,openBlock as i,createBlock as c,normalizeClass as m,normalizeStyle as v,withCtx as f,createVNode as y,mergeProps as b,createSlots as w,createElementVNode as V,toHandlers as g,renderSlot as h,normalizeProps as I,guardReactiveProps as D,createCommentVNode as j,withModifiers as P,withKeys as k,renderList as O}from"vue";import{o as C}from"../../../vendor.mjs";import{e as S,f as x}from"../../utils/child-props.mjs";import{a as _,u as B,b as F}from"../../composables/useClearable.mjs";import"colortranslator";import{u as K,a as T}from"../../composables/useFocus.mjs";import"../../composables/useDropdown.mjs";import{a as $,u as A,b as W}from"../../composables/useValidation.mjs";import{u as E}from"../../composables/useSyncProp.mjs";import{u as L}from"./hooks/time-text-parser.mjs";import{u as M}from"./hooks/time-text-formatter.mjs";import{_ as q}from"../va-time-picker/VaTimePicker.mjs";import"../va-input/index.mjs";import{V as R}from"../va-icon/VaIcon.mjs";import{V as U}from"../va-dropdown/index.mjs";import{_ as z}from"../../../plugin-vue_export-helper.mjs";import{V as H}from"../va-dropdown/components/VaDropdownContent/index.mjs";import{V as G}from"../va-input/components/VaInputWrapper/VaInputWrapper.mjs";const J=S(G,["focused","maxLength","counterValue","disabled"]);var N=z(l({name:"VaTimeInput",components:{VaDropdown:U,VaDropdownContent:H,VaTimePicker:q,VaIcon:R,VaInputWrapper:G},emits:[...K,...$,..._,"update:modelValue","update:isOpen"],props:__spreadProps(__spreadValues(__spreadValues(__spreadValues(__spreadValues({},B),J),S(q)),A),{isOpen:{type:Boolean,default:void 0},modelValue:{type:Date,default:void 0},clearValue:{type:Date,default:void 0},format:{type:Function},parse:{type:Function},manualInput:{type:Boolean,default:!1},leftIcon:{type:Boolean,default:!1},icon:{type:String,default:"schedule"}}),inheritAttrs:!1,setup(e,{emit:o,slots:r,attrs:a}){const t=s(),n=s(),[l]=E("isOpen",e,o,!1),[u]=E("modelValue",e,o),{parse:i,isValid:c}=L(e),{format:m}=M(e),v=p((()=>m(u.value||e.clearValue))),f=p({get:()=>!e.disabled&&!e.readonly&&l.value,set(e){l.value=e,d(e?()=>{var e;return null==(e=n.value)?void 0:e.focus()}:()=>{var e;return null==(e=t.value)?void 0:e.focus()})}}),{isFocused:y,focus:b,blur:w,onFocus:V,onBlur:g}=T(t),reset=()=>{o("update:modelValue",e.clearValue),o("clear")},{computedError:h,computedErrorMessages:I,listeners:D,validationAriaAttributes:j}=W(e,o,reset,b),{canBeCleared:P,clearIconProps:k,onFocus:O,onBlur:_}=F(e,v),B=p((()=>P.value&&v.value!==m(e.clearValue))),K=p((()=>__spreadProps(__spreadValues({},x(e,J).value),{focused:y.value,error:h.value,errorMessages:I.value,readonly:e.readonly||!e.manualInput}))),$=p((()=>({focus:()=>{e.disabled||(V(),e.readonly||(O(),D.onFocus()))},blur:()=>{e.disabled||(g(),e.readonly||(_(),D.onBlur()))}}))),A=p((()=>{const o=[e.leftIcon&&"prependInner",(!e.leftIcon||e.clearable)&&"icon"];return Object.keys(r).filter((e=>!o.includes(e)))})),R=p((()=>e.disabled?{}:e.manualInput?{cursor:"text"}:{cursor:"pointer"})),U=p((()=>e.disabled||e.readonly?-1:0)),z=p((()=>({role:"button",ariaHidden:!1,size:"small",name:e.icon,color:e.color,tabindex:U.value}))),H=p((()=>__spreadValues(__spreadValues({readonly:e.readonly||!e.manualInput,tabindex:e.disabled?-1:0,value:v.value,ariaLabel:e.label||"selected date",ariaRequired:e.requiredMark,ariaDisabled:e.disabled,ariaReadOnly:e.readonly},j.value),C(a,["class","style"]))));return{input:t,timePicker:n,timePickerProps:x(e,S(q)),computedInputWrapperProps:K,computedInputListeners:$,isOpenSync:l,doShowDropdown:f,modelValueSync:u,valueText:v,onInputTextChanged:e=>{var o;const r=null==(o=e.target)?void 0:o.value;if(!r)return reset();const a=i(r);c.value&&a?u.value=a:(u.value=void 0,c.value=!0)},canBeClearedComputed:B,iconProps:z,clearIconProps:k,filteredSlots:A,inputAttributesComputed:H,cursorStyleComputed:R,hideDropdown:()=>{f.value=!1},showDropdown:(e,o,r)=>{f.value=!0},toggleDropdown:o=>{var r;(r=o instanceof KeyboardEvent?o:void 0,l.value||!(e.disabled||e.readonly||e.manualInput&&"Space"!==(null==r?void 0:r.code)))&&(f.value=!f.value)},reset:reset,focus:b,blur:w}}}),[["render",function _sfc_render(e,o,r,a,t,n){const l=u("va-icon"),s=u("va-input-wrapper"),p=u("va-time-picker"),d=u("va-dropdown-content"),C=u("va-dropdown");return i(),c(C,{modelValue:e.doShowDropdown,"onUpdate:modelValue":o[2]||(o[2]=o=>e.doShowDropdown=o),class:m(["va-time-input",e.$attrs.class]),placement:"bottom-start","inner-anchor-selector":".va-input-wrapper__field",style:v(e.$attrs.style),offset:[2,0],"close-on-content-click":!1,disabled:e.$props.disabled,"keyboard-navigation":""},{anchor:f((()=>[y(s,b({class:"va-time-input__anchor",style:e.cursorStyleComputed},e.computedInputWrapperProps),w({default:f((()=>[V("input",b({ref:"input",class:"va-time-input__input"},e.inputAttributesComputed,g(e.computedInputListeners),{onChange:o[0]||(o[0]=(...o)=>e.onInputTextChanged&&e.onInputTextChanged(...o))}),null,16)])),prependInner:f((o=>[h(e.$slots,"prependInner",I(D(__spreadProps(__spreadValues({},o),{toggleDropdown:e.toggleDropdown,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus})))),e.$props.leftIcon?(i(),c(l,b({key:0,"aria-label":"toggle dropdown"},e.iconProps),null,16)):j("",!0)])),icon:f((()=>[e.canBeClearedComputed?(i(),c(l,b({key:0,"aria-label":"reset time"},__spreadValues(__spreadValues({},e.iconProps),e.clearIconProps),{onClick:P(e.reset,["stop"]),onKeydown:[k(P(e.reset,["stop"]),["enter"]),k(P(e.reset,["stop"]),["space"])]}),null,16,["onClick","onKeydown"])):e.$props.leftIcon?j("",!0):(i(),c(l,b({key:1,"aria-label":"toggle dropdown"},e.iconProps),null,16))])),_:2},[O(e.filteredSlots,(o=>({name:o,fn:f((r=>[h(e.$slots,o,I(D(__spreadProps(__spreadValues({},r),{toggleDropdown:e.toggleDropdown,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus}))))]))})))]),1040,["style"])])),default:f((()=>[y(d,{"no-padding":"",onKeydown:k(P(e.hideDropdown,["prevent"]),["esc"]),onKeypress:k(P(e.hideDropdown,["prevent"]),["enter"])},{default:f((()=>[y(p,b({ref:"timePicker"},e.timePickerProps,{modelValue:e.modelValueSync,"onUpdate:modelValue":o[1]||(o[1]=o=>e.modelValueSync=o)}),null,16,["modelValue"])])),_:1},8,["onKeydown","onKeypress"])])),_:3},8,["modelValue","class","style","disabled"])}]]);export{N as _};

import './VaTimeInput.css';
//# sourceMappingURL=VaTimeInput.mjs.map
